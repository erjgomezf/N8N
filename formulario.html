<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        window.WEBHOOK_URL = '{{ $('Configuracion').item.json.webhook_url }}/webhook/streaming-service';
    </script>
    <title>Solicitud de Servicio - Streaming Profesional</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #1a1a1a;
            color: #fff;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Imagen de fondo din√°mica por defecto */
            background-image: url('https://images.unsplash.com/photo-1492684223066-81342ee5ff30?auto=format&fit=crop&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background-image 0.5s ease-in-out;
        }

        /* Overlay oscuro para mejorar legibilidad */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 50%, rgba(0,0,0,0.8) 100%);
            z-index: -1;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
            min-height: 80vh;
        }

        /* Panel Izquierdo (Slogan) - Ahora transparente */
        .left-panel {
            flex: 1;
            padding: 40px;
            /* Sin fondo propio */
        }

        /* Eliminamos el pseudo-elemento del panel izquierdo anterior */
        .left-panel::before {
            display: none;
        }

        .left-content {
            position: relative;
            z-index: 2;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .brand-tag {
            background: rgba(212, 175, 55, 0.2);
            border: 1px solid #D4AF37;
            color: #D4AF37;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            display: inline-block;
            margin-bottom: 20px;
            backdrop-filter: blur(5px);
        }

        .main-slogan {
            font-size: 4rem; /* M√°s grande */
            line-height: 1.1;
            font-weight: 800;
            margin-bottom: 25px;
        }

        .main-slogan span {
            color: #D4AF37;
            display: block;
            font-style: italic; /* Estilo m√°s elegante */
        }

        .sub-slogan {
            font-size: 1.2rem;
            color: #eee;
            line-height: 1.6;
            max-width: 80%;
        }

        /* Panel Derecho (Formulario) - Ahora es la tarjeta */
        .right-panel {
            flex: 0 0 500px; /* Ancho fijo para el formulario */
            padding: 40px;
            background: rgba(0, 0, 0, 0.6); /* Fondo semi-transparente oscuro */
            backdrop-filter: blur(20px); /* Efecto glassmorphism fuerte */
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-height: 90vh;
            overflow-y: auto;
        }

        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
                padding: 40px 20px;
            }
            
            .left-panel {
                text-align: center;
                padding: 20px;
            }

            .sub-slogan {
                margin: 0 auto;
            }

            .right-panel {
                width: 100%;
                flex: none;
            }

            .main-slogan {
                font-size: 2.5rem;
            }
        }

        h1 {
            color: #D4AF37;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h2 {
            color: #D4AF37;
            font-size: 1.3rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(212, 175, 55, 0.3);
        }

        .form-group {
            margin-bottom: 25px;
            animation: fadeIn 0.3s ease-in;
            position: relative;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #D4AF37;
            font-weight: 500;
            font-size: 0.95rem;
        }

        label .required {
            color: #ff6b6b;
            margin-left: 4px;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            padding-right: 45px; /* Espacio para el icono */
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #D4AF37;
            background: rgba(255, 255, 255, 0.15);
        }

        input::placeholder, textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        select {
            cursor: pointer;
        }

        select option {
            background: #2d2d2d;
            color: #fff;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item input[type="checkbox"]:checked {
            transform: scale(1.2) rotate(360deg);
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            flex: 1;
        }

        .error-message {
            color: #ff6b6b;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .form-group.error input,
        .form-group.error select,
        .form-group.error textarea {
            border-color: #ff6b6b;
        }

        .form-group.error .error-message {
            display: block;
        }

        /* Estilos para validaci√≥n positiva */
        .form-group.valid input,
        .form-group.valid select,
        .form-group.valid textarea {
            border-color: #51cf66;
        }

        .success-message {
            color: #51cf66;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .form-group.valid .success-message {
            display: block;
        }

        /* Iconos de validaci√≥n */
        .validation-icon {
            position: absolute;
            right: 15px;
            top: 38px;
            font-size: 1.2rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .form-group.valid .validation-icon.check {
            opacity: 1;
            color: #51cf66;
        }

        .form-group.error .validation-icon.cross {
            opacity: 1;
            color: #ff6b6b;
        }

        .btn-submit {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #D4AF37 0%, #F4D03F 100%);
            color: #1a1a1a;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn-submit::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-submit:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }

        .btn-submit:active {
            transform: translateY(0);
        }

        .btn-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-submit.loading {
            pointer-events: none;
        }

        .btn-submit.loading::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            top: 50%;
            left: 50%;
            margin-left: -8px;
            margin-top: -8px;
            border: 2px solid #1a1a1a;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 0.6s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Animaci√≥n de √©xito */
        .success-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid #51cf66;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            z-index: 10000;
            opacity: 0;
            animation: fadeInScale 0.5s ease forwards;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .success-animation h3 {
            color: #51cf66;
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .success-animation p {
            color: #ddd;
            font-size: 1.1rem;
        }

        .success-checkmark {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: block;
            stroke-width: 3;
            stroke: #51cf66;
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px #51cf66;
            animation: fill 0.4s ease-in-out 0.4s forwards, scale 0.3s ease-in-out 0.9s both;
        }

        .success-checkmark__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 3;
            stroke-miterlimit: 10;
            stroke: #51cf66;
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }

        .success-checkmark__check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }

        @keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }

        @keyframes scale {
            0%, 100% {
                transform: none;
            }
            50% {
                transform: scale3d(1.1, 1.1, 1);
            }
        }

        @keyframes fill {
            100% {
                box-shadow: inset 0px 0px 0px 30px #51cf66;
            }
        }

        #dynamicFields {
            margin-top: 20px;
        }

        .info-box {
            background: rgba(212, 175, 55, 0.1);
            border-left: 4px solid #D4AF37;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box p {
            color: #ddd;
            line-height: 1.6;
        }

        /* ========================================
           SISTEMA DE TOOLTIPS INTELIGENTE
           ======================================== */
        
        /* Contenedor del select con tooltip */
        .package-option {
            position: relative;
            display: block;
            width: 100%;
        }
        
        .package-option select {
            width: 100%;
            cursor: pointer;
        }

        /* Tooltip base - PC */
        .package-tooltip {
            position: absolute;
            left: 50%;
            width: 350px;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid #D4AF37;
            border-radius: 12px;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            pointer-events: none;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        /* Posicionamiento: arriba del select */
        .package-tooltip.position-top {
            bottom: 100%;
            margin-bottom: 15px;
            transform: translate(-50%, 10px);
        }

        .package-tooltip.position-top.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, 0);
        }

        /* Posicionamiento: abajo del select */
        .package-tooltip.position-bottom {
            top: 100%;
            margin-top: 15px;
            transform: translate(-50%, -10px);
        }

        .package-tooltip.position-bottom.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, 0);
        }

        /* Flecha del tooltip - arriba (tooltip debajo del select) */
        .package-tooltip.position-bottom::before {
            content: '';
            position: absolute;
            left: 50%;
            top: -10px;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 10px solid #D4AF37;
        }

        /* Flecha del tooltip - abajo (tooltip arriba del select) */
        .package-tooltip.position-top::before {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -10px;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid #D4AF37;
        }

        /* Contenido del tooltip */
        .package-tooltip h4 {
            color: #D4AF37;
            font-size: 1.1rem;
            margin-bottom: 12px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            padding-bottom: 10px;
            font-weight: 600;
        }

        .package-tooltip ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .package-tooltip li {
            color: #ddd;
            font-size: 0.9rem;
            padding: 6px 0;
            padding-left: 25px;
            position: relative;
            line-height: 1.4;
        }

        .package-tooltip li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #51cf66;
            font-weight: bold;
            font-size: 1rem;
        }

        /* ========================================
           DRAWER M√ìVIL (BOTTOM SHEET)
           ======================================== */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2rem;
            }

            /* Backdrop oscuro */
            .tooltip-backdrop {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(4px);
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
                z-index: 999;
            }

            .tooltip-backdrop.show {
                opacity: 1;
                visibility: visible;
            }

            /* Drawer desde abajo */
            .package-tooltip {
                position: fixed;
                left: 0;
                right: 0;
                bottom: 0;
                top: auto;
                width: 100%;
                max-width: 100%;
                margin: 0;
                border-radius: 20px 20px 0 0;
                padding: 24px;
                transform: translateY(100%);
                opacity: 1;
                visibility: visible;
                pointer-events: auto;
                max-height: 70vh;
                overflow-y: auto;
                z-index: 1000;
            }

            .package-tooltip.show {
                transform: translateY(0);
            }

            /* Eliminar flechas en m√≥vil */
            .package-tooltip::before {
                display: none;
            }

            /* Handle del drawer (l√≠nea superior) */
            .package-tooltip::after {
                content: '';
                position: absolute;
                top: 12px;
                left: 50%;
                transform: translateX(-50%);
                width: 40px;
                height: 4px;
                background: rgba(212, 175, 55, 0.5);
                border-radius: 2px;
            }

            /* Ajustar padding superior para el handle */
            .package-tooltip h4 {
                margin-top: 8px;
                font-size: 1.2rem;
            }

            /* Bot√≥n de cerrar en m√≥vil */
            .tooltip-close-btn {
                display: block;
                position: absolute;
                top: 16px;
                right: 16px;
                background: rgba(212, 175, 55, 0.2);
                border: 1px solid #D4AF37;
                color: #D4AF37;
                width: 32px;
                height: 32px;
                border-radius: 50%;
                font-size: 20px;
                line-height: 1;
                cursor: pointer;
                transition: all 0.2s ease;
                padding: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .tooltip-close-btn:hover,
            .tooltip-close-btn:active {
                background: rgba(212, 175, 55, 0.3);
                transform: scale(1.1);
            }

            /* Prevenir scroll del body cuando el drawer est√° abierto */
            body.tooltip-open {
                overflow: hidden;
            }
        }

        /* Bot√≥n de cerrar oculto en desktop */
        @media (min-width: 769px) {
            .tooltip-close-btn {
                display: none;
            }

            .tooltip-backdrop {
                display: none;
            }
        }

        /* Estilos del Stepper (Wizard) */
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
            padding: 0 20px;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 40px;
            right: 40px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 0;
        }

        .step {
            position: relative;
            z-index: 1;
            text-align: center;
            width: 100%;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            background: #2d2d2d;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: 600;
            color: #aaa;
            transition: all 0.3s ease;
        }

        .step.active .step-circle {
            border-color: #D4AF37;
            background: #D4AF37;
            color: #1a1a1a;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
        }

        .step.completed .step-circle {
            border-color: #51cf66;
            background: #51cf66;
            color: #fff;
        }

        .step-label {
            font-size: 0.85rem;
            color: #aaa;
            display: none;
            transition: color 0.3s ease;
        }

        .step.active .step-label,
        .step.completed .step-label {
            color: #fff;
        }

        @media (min-width: 768px) {
            .step-label { display: block; }
        }

        /* Pasos del formulario */
        .form-step {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .form-step.active {
            display: block;
        }

        /* Botones de navegaci√≥n */
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .btn-nav {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-prev {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .btn-prev:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-next {
            background: linear-gradient(135deg, #D4AF37 0%, #F4D03F 100%);
            color: #1a1a1a;
            flex: 1;
        }

        .btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Panel Izquierdo -->
        <div class="left-panel">
            <div class="left-content">
                <div class="brand-tag">LIVE MOMENTS PRODUCTION</div>
                <h1 class="main-slogan" id="dynamicSlogan">
                    Conserva tus <br>
                    <span>mejores momentos</span>
                </h1>
                <p class="sub-slogan" id="dynamicSubSlogan">
                    La distancia es solo f√≠sica. Ofrecemos servicios de streaming profesional multic√°mara para que nadie se pierda tu celebraci√≥n.
                </p>
            </div>
        </div>

        <!-- Panel Derecho -->
        <div class="right-panel">
            <h2 style="text-align: center; margin-bottom: 10px; color: #D4AF37;">Comienza la Magia</h2>
            <p class="subtitle">D√©janos tus datos y dise√±aremos una experiencia a medida.</p>

        <!-- Indicador de Pasos -->
        <div class="step-indicator">
            <div class="step active">
                <div class="step-circle">1</div>
                <div class="step-label">Tipo de Evento</div>
            </div>
            <div class="step">
                <div class="step-circle">2</div>
                <div class="step-label">Detalles</div>
            </div>
            <div class="step">
                <div class="step-circle">3</div>
                <div class="step-label">Paquete</div>
            </div>
            <div class="step">
                <div class="step-circle">4</div>
                <div class="step-label">Contacto</div>
            </div>
        </div>

        <form id="eventForm">
            <!-- PASO 1: TIPO DE EVENTO -->
            <div class="form-step active">
                <div class="form-section">
                    <h2>üìã Tipo de Evento</h2>
                    
                    <div class="form-group">
                        <label for="tipo_evento">Selecciona el tipo de evento <span class="required">*</span></label>
                        <select id="tipo_evento" name="tipo_evento" required>
                            <option value="">-- Selecciona una opci√≥n --</option>
                            <option value="Eventos sociales">üéä Eventos Sociales</option>
                            <option value="Conferencias y eventos corporativos">üè¢ Conferencias y Eventos Corporativos</option>
                            <option value="E-Sport y Gaming">üéÆ E-Sports y Gaming</option>
                            <option value="Conciertos y Eventos Art√≠sticos">üéµ Conciertos y Eventos Art√≠sticos</option>
                            <option value="Eventos Religiosos">‚õ™ Eventos Religiosos</option>
                            <option value="Eventos Deportivos">‚öΩ Eventos Deportivos</option>
                        </select>
                        <span class="error-message">Por favor selecciona un tipo de evento</span>
                    </div>

                    <!-- Campos din√°micos se insertar√°n aqu√≠ -->
                    <div id="dynamicFields"></div>
                </div>
            </div>

            <!-- PASO 2: INFORMACI√ìN DEL EVENTO -->
            <div class="form-step">
                <div class="form-section">
                    <h2>üìÖ Informaci√≥n del Evento</h2>
                    
                    <div class="form-group">
                        <label for="fecha_evento">Fecha del evento <span class="required">*</span></label>
                        <input type="date" id="fecha_evento" name="fecha_evento" required>
                        <span class="error-message">Selecciona una fecha futura</span>
                    </div>

                    <div class="form-group">
                        <label for="ubicacion_evento">Ubicaci√≥n del evento <span class="required">*</span></label>
                        <input type="text" id="ubicacion_evento" name="ubicacion_evento" 
                               placeholder="Ciudad, Estado o direcci√≥n espec√≠fica" required>
                        <span class="error-message">Ingresa la ubicaci√≥n del evento</span>
                    </div>

                    <div class="form-group">
                        <label for="duracion_estimada">Duraci√≥n estimada <span class="required">*</span></label>
                        <select id="duracion_estimada" name="duracion_estimada" required>
                            <option value="">-- Selecciona --</option>
                            <option value="2 horas">2 horas</option>
                            <option value="4 horas">4 horas</option>
                            <option value="6 horas">6 horas</option>
                            <option value="8 horas">8 horas</option>
                            <option value="Todo el d√≠a">Todo el d√≠a</option>
                            <option value="Varios d√≠as">Varios d√≠as</option>
                        </select>
                        <span class="error-message">Selecciona la duraci√≥n estimada</span>
                    </div>

                    <div class="form-group">
                        <label for="tiene_internet_venue">¬øEl lugar cuenta con internet? <span class="required">*</span></label>
                        <select id="tiene_internet_venue" name="tiene_internet_venue" required>
                            <option value="">-- Selecciona --</option>
                            <option value="S√≠">S√≠</option>
                            <option value="No">No</option>
                            <option value="No estoy seguro">No estoy seguro</option>
                        </select>
                        <span class="error-message">Selecciona una opci√≥n</span>
                    </div>
                </div>
            </div>

            <!-- PASO 3: PAQUETE Y ADD-ONS -->
            <div class="form-step">
                <div class="form-section">
                    <h2>üì¶ Paquete y Servicios</h2>
                    
                    <div class="form-group">
                        <label for="paquete_interes">Paquete de inter√©s <span class="required">*</span></label>
                        
                        <div class="package-option">
                            <select id="paquete_interes" name="paquete_interes" required>
                                <option value="">-- Selecciona --</option>
                                <option value="B√°sico" data-package="basico">ü•â B√°sico - 1 c√°mara HD</option>
                                <option value="Est√°ndar" data-package="estandar">ü•à Est√°ndar - 2 c√°maras HD + overlays b√°sicos</option>
                                <option value="Premium" data-package="premium">ü•á Premium - 3 c√°maras HD + director t√©cnico</option>
                                <option value="Enterprise" data-package="enterprise">üíé Enterprise - 4 c√°maras 4K + multi-plataforma</option>
                                <option value="No estoy seguro">‚ùì No estoy seguro</option>
                            </select>
                            
                            <!-- Tooltip que aparecer√° al hacer hover -->
                            <div id="packageTooltip" class="package-tooltip" style="display: none;">
                                <button id="tooltipCloseBtn" class="tooltip-close-btn" aria-label="Cerrar">√ó</button>
                                <h4 id="tooltipTitle"></h4>
                                <ul id="tooltipContent"></ul>
                            </div>
                        </div>
                        
                        <span class="error-message">Selecciona un paquete</span>
                    </div>
                    
                    <!-- Backdrop para m√≥vil -->
                    <div id="tooltipBackdrop" class="tooltip-backdrop"></div>

                    <!-- Info box con detalles de paquetes -->
                    <div class="info-box" style="margin-top: 15px;">
                        <p><strong>üí° Pasa el mouse sobre cada paquete para ver los detalles completos</strong></p>
                    </div>

                    <div class="form-group">
                        <label>Servicios adicionales (opcional)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="addon_camara" name="add_ons" value="C√°mara + Micr√≥fono Adicional">
                                <label for="addon_camara">üìπ C√°maras + Micr√≥fonos adicionales</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="addon_starlink" name="add_ons" value="Internet Starlink">
                                <label for="addon_starlink">üõ∞Ô∏è Internet Starlink (Garant√≠a de conectividad)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="addon_overlays" name="add_ons" value="Overlays Personalizados">
                                <label for="addon_overlays">üé® Overlays Personalizados</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="addon_plataforma" name="add_ons" value="Plataforma Adicional">
                                <label for="addon_plataforma">üì∫ Plataforma Adicional (Solo Enterprise)</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PASO 4: DATOS DE CONTACTO -->
            <div class="form-step">
                <div class="form-section">
                    <h2>üë§ Datos de Contacto</h2>
                    
                    <div class="form-group">
                        <label for="nombre_cliente">Nombre completo <span class="required">*</span></label>
                        <input type="text" id="nombre_cliente" name="nombre_cliente" 
                               placeholder="Juan P√©rez" required>
                        <span class="validation-icon check">‚úì</span>
                        <span class="validation-icon cross">‚úó</span>
                        <span class="error-message">Ingresa tu nombre completo (m√≠nimo 3 caracteres)</span>
                        <span class="success-message">‚úì Nombre v√°lido</span>
                    </div>

                    <div class="form-group">
                        <label for="email_cliente">Correo electr√≥nico <span class="required">*</span></label>
                        <input type="email" id="email_cliente" name="email_cliente" 
                               placeholder="juan@email.com" required>
                        <span class="validation-icon check">‚úì</span>
                        <span class="validation-icon cross">‚úó</span>
                        <span class="error-message">Ingresa un email v√°lido</span>
                        <span class="success-message">‚úì Email v√°lido</span>
                    </div>

                    <div class="form-group">
                        <label for="telefono_cliente">Tel√©fono / WhatsApp <span class="required">*</span></label>
                        <input type="tel" id="telefono_cliente" name="telefono_cliente" 
                               placeholder="+58 412 1234567" required>
                        <span class="validation-icon check">‚úì</span>
                        <span class="validation-icon cross">‚úó</span>
                        <span class="error-message">Ingresa un tel√©fono v√°lido (m√≠nimo 10 d√≠gitos)</span>
                        <span class="success-message">‚úì Tel√©fono v√°lido</span>
                    </div>

                    <div class="form-group">
                        <label for="comentarios_adicionales">Comentarios adicionales (opcional)</label>
                        <textarea id="comentarios_adicionales" name="comentarios_adicionales" 
                                  placeholder="Cu√©ntanos m√°s sobre tu evento, necesidades especiales, presupuesto aproximado, etc."></textarea>
                    </div>
                </div>
            </div>

            <!-- Botones de Navegaci√≥n -->
            <div class="form-navigation">
                <button type="button" id="prevBtn" class="btn-nav btn-prev" onclick="nextPrev(-1)" style="display: none;">Anterior</button>
                <button type="button" id="nextBtn" class="btn-nav btn-next" onclick="nextPrev(1)">Siguiente</button>
                <button type="submit" id="submitBtn" class="btn-submit" style="display: none;">Enviar Solicitud</button>
            </div>
        </form>
        </div> <!-- Fin right-panel -->
    </div> <!-- Fin container -->

    <script>
        // ========================================
        // CONFIGURACI√ìN DE CAMPOS DIN√ÅMICOS
        // ========================================
        
        const camposDinamicos = {
            "Eventos sociales": [
                {
                    type: "select",
                    name: "tipo_celebracion",
                    label: "Tipo de celebraci√≥n",
                    required: true,
                    options: ["Boda", "Quincea√±era", "Aniversario", "Baby Shower", "Otro"]
                },
                {
                    type: "number",
                    name: "numero_invitados",
                    label: "N√∫mero aproximado de invitados",
                    required: false,
                    placeholder: "150"
                },
                {
                    type: "checkboxes",
                    name: "momentos_clave",
                    label: "Momentos clave a transmitir",
                    required: false,
                    options: ["Toda la Ceremonia", "Entrada del evento", "Momentos especiales", "Brindis"]
                }
            ],
            "Conferencias y eventos corporativos": [
                {
                    type: "text",
                    name: "nombre_empresa",
                    label: "Nombre de la empresa",
                    required: true,
                    placeholder: "Empresa XYZ C.A."
                },
                {
                    type: "select",
                    name: "tipo_conferencia",
                    label: "Tipo de conferencia",
                    required: true,
                    options: ["Seminario", "Capacitaci√≥n", "Lanzamiento de producto", "Asamblea", "Evento corporativo"]
                },
                {
                    type: "number",
                    name: "numero_speakers",
                    label: "N√∫mero de speakers/ponentes",
                    required: false,
                    placeholder: "3"
                },
                {
                    type: "number",
                    name: "numero_asistentes",
                    label: "N√∫mero aproximado de asistentes",
                    required: false,
                    placeholder: "200"
                },
                {
                    type: "select",
                    name: "necesita_grabacion",
                    label: "¬øNecesita grabaci√≥n del evento?",
                    required: false,
                    options: ["S√≠", "No"]
                },
                {
                    type: "checkboxes",
                    name: "plataformas_destino",
                    label: "Plataformas de destino",
                    required: false,
                    options: ["YouTube", "Facebook", "LinkedIn", "Plataforma privada"]
                }
            ],
            "E-Sport y Gaming": [
                {
                    type: "text",
                    name: "juego_plataforma",
                    label: "Juego o plataforma",
                    required: true,
                    placeholder: "League of Legends, Fortnite, etc."
                },
                {
                    type: "select",
                    name: "tipo_torneo",
                    label: "Tipo de torneo",
                    required: true,
                    options: ["Local", "Nacional", "Internacional", "Amistoso"]
                },
                {
                    type: "number",
                    name: "numero_equipos",
                    label: "N√∫mero de equipos",
                    required: false,
                    placeholder: "8"
                },
                {
                    type: "number",
                    name: "numero_jugadores",
                    label: "N√∫mero total de jugadores",
                    required: false,
                    placeholder: "40"
                },
                {
                    type: "select",
                    name: "necesita_scoreboards",
                    label: "¬øNecesita scoreboards?",
                    required: false,
                    options: ["S√≠", "No"]
                },
                {
                    type: "select",
                    name: "necesita_comentaristas",
                    label: "¬øHabr√° comentaristas?",
                    required: false,
                    options: ["S√≠", "No"]
                },
                {
                    type: "checkboxes",
                    name: "plataformas_destino",
                    label: "Plataformas de streaming",
                    required: false,
                    options: ["Twitch", "YouTube", "Facebook Gaming", "Kick"]
                }
            ],
            "Conciertos y Eventos Art√≠sticos": [
                {
                    type: "select",
                    name: "tipo_evento_artistico",
                    label: "Tipo de evento",
                    required: true,
                    options: ["Concierto", "Teatro", "Stand-up comedy", "Performance", "Festival"]
                },
                {
                    type: "text",
                    name: "nombre_artista",
                    label: "Nombre del artista/banda",
                    required: false,
                    placeholder: "Banda XYZ"
                },
                {
                    type: "number",
                    name: "numero_artistas",
                    label: "N√∫mero de artistas",
                    required: false,
                    placeholder: "5"
                },
                {
                    type: "select",
                    name: "tipo_venue",
                    label: "Tipo de venue",
                    required: false,
                    options: ["Cerrado", "Abierto", "Teatro", "Club"]
                },
                {
                    type: "select",
                    name: "necesita_audio_profesional",
                    label: "¬øNecesita audio profesional?",
                    required: false,
                    options: ["S√≠", "No"]
                }
            ],
            "Eventos Religiosos": [
                {
                    type: "select",
                    name: "tipo_ceremonia",
                    label: "Tipo de ceremonia",
                    required: true,
                    options: ["Misa", "Culto", "Bautizo", "Primera Comuni√≥n", "Boda religiosa", "Otro"]
                },
                {
                    type: "number",
                    name: "numero_asistentes",
                    label: "N√∫mero aproximado de asistentes",
                    required: false,
                    placeholder: "100"
                },
                {
                    type: "select",
                    name: "necesita_audio_claro",
                    label: "¬øNecesita audio especial para sermones/pr√©dicas?",
                    required: false,
                    options: ["S√≠", "No"]
                }
            ],
            "Eventos Deportivos": [
                {
                    type: "text",
                    name: "tipo_deporte",
                    label: "Tipo de deporte",
                    required: true,
                    placeholder: "F√∫tbol, Baloncesto, etc."
                },
                {
                    type: "select",
                    name: "tipo_evento_deportivo",
                    label: "Tipo de evento",
                    required: true,
                    options: ["Partido √∫nico", "Torneo", "Liga", "Amistoso"]
                },
                {
                    type: "number",
                    name: "numero_equipos",
                    label: "N√∫mero de equipos",
                    required: false,
                    placeholder: "2"
                },
                {
                    type: "select",
                    name: "necesita_scoreboards",
                    label: "¬øNecesita scoreboards?",
                    required: false,
                    options: ["S√≠", "No"]
                },
                {
                    type: "select",
                    name: "necesita_replays",
                    label: "¬øNecesita replays?",
                    required: false,
                    options: ["S√≠", "No"]
                },
                {
                    type: "select",
                    name: "tipo_venue_deportivo",
                    label: "Tipo de venue",
                    required: false,
                    options: ["Estadio", "Cancha abierta", "Gimnasio", "Otro"]
                }
            ]
        };

        // ========================================
        // FUNCIONES PRINCIPALES
        // ========================================

        // Funci√≥n para renderizar campos din√°micos
        function renderizarCamposDinamicos(tipoEvento) {
            const container = document.getElementById('dynamicFields');
            container.innerHTML = ''; // Limpiar campos anteriores

            if (!tipoEvento || !camposDinamicos[tipoEvento]) {
                return;
            }

            const campos = camposDinamicos[tipoEvento];
            
            campos.forEach(campo => {
                const formGroup = document.createElement('div');
                formGroup.className = 'form-group';

                const label = document.createElement('label');
                label.textContent = campo.label;
                if (campo.required) {
                    const required = document.createElement('span');
                    required.className = 'required';
                    required.textContent = ' *';
                    label.appendChild(required);
                }
                formGroup.appendChild(label);

                // Crear el input seg√∫n el tipo
                if (campo.type === 'text' || campo.type === 'number') {
                    const input = document.createElement('input');
                    input.type = campo.type;
                    input.name = campo.name;
                    input.id = campo.name;
                    if (campo.placeholder) input.placeholder = campo.placeholder;
                    if (campo.required) input.required = true;
                    formGroup.appendChild(input);
                } else if (campo.type === 'select') {
                    const select = document.createElement('select');
                    select.name = campo.name;
                    select.id = campo.name;
                    if (campo.required) select.required = true;

                    const defaultOption = document.createElement('option');
                    defaultOption.value = '';
                    defaultOption.textContent = '-- Selecciona --';
                    select.appendChild(defaultOption);

                    campo.options.forEach(opcion => {
                        const option = document.createElement('option');
                        option.value = opcion;
                        option.textContent = opcion;
                        select.appendChild(option);
                    });

                    formGroup.appendChild(select);
                } else if (campo.type === 'checkboxes') {
                    const checkboxGroup = document.createElement('div');
                    checkboxGroup.className = 'checkbox-group';

                    campo.options.forEach((opcion, index) => {
                        const checkboxItem = document.createElement('div');
                        checkboxItem.className = 'checkbox-item';

                        const checkbox = document.createElement('input');
                        checkbox.type = 'checkbox';
                        checkbox.name = campo.name;
                        checkbox.id = `${campo.name}_${index}`;
                        checkbox.value = opcion;

                        const checkboxLabel = document.createElement('label');
                        checkboxLabel.htmlFor = `${campo.name}_${index}`;
                        checkboxLabel.textContent = opcion;

                        checkboxItem.appendChild(checkbox);
                        checkboxItem.appendChild(checkboxLabel);
                        checkboxGroup.appendChild(checkboxItem);
                    });

                    formGroup.appendChild(checkboxGroup);
                }

                const errorMessage = document.createElement('span');
                errorMessage.className = 'error-message';
                errorMessage.textContent = 'Este campo es obligatorio';
                formGroup.appendChild(errorMessage);

                container.appendChild(formGroup);
            });
        }

        // ========================================
        // VALIDACI√ìN EN TIEMPO REAL
        // ========================================

        // Funci√≥n para validar un campo
        function validarCampo(input) {
            const formGroup = input.closest('.form-group');
            const valor = input.value.trim();
            let esValido = false;

            // Validar seg√∫n el tipo de campo
            if (input.id === 'nombre_cliente') {
                esValido = valor.length >= 3;
            } else if (input.id === 'email_cliente') {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                esValido = emailRegex.test(valor);
            } else if (input.id === 'telefono_cliente') {
                const telefonoLimpio = valor.replace(/\D/g, '');
                esValido = telefonoLimpio.length >= 10;
            } else if (input.required) {
                esValido = valor.length > 0;
            }

            // Aplicar clases seg√∫n validaci√≥n
            if (esValido) {
                formGroup.classList.remove('error');
                formGroup.classList.add('valid');
            } else if (valor.length > 0) {
                formGroup.classList.remove('valid');
                formGroup.classList.add('error');
            } else {
                formGroup.classList.remove('valid', 'error');
            }
        }

        // Event listeners para validaci√≥n en tiempo real
        // Nombre
        document.getElementById('nombre_cliente').addEventListener('input', function() {
            validarCampo(this);
        });

        // Email
        document.getElementById('email_cliente').addEventListener('input', function() {
            validarCampo(this);
        });

        // Tel√©fono
        document.getElementById('telefono_cliente').addEventListener('input', function() {
            validarCampo(this);
        });

        // ========================================
        // SISTEMA DE TOOLTIPS INTELIGENTE
        // ========================================

        // Informaci√≥n detallada de cada paquete
        const paquetesInfo = {
            basico: {
                titulo: "ü•â Paquete B√°sico",
                items: [
                    "1 c√°mara HD",
                    "1 micr√≥fono inal√°mbrico",
                    "Streaming a 1 plataforma",
                    "Sin overlays",
                    "Operador t√©cnico b√°sico"
                ]
            },
            estandar: {
                titulo: "ü•à Paquete Est√°ndar",
                items: [
                    "2 c√°maras HD",
                    "2 micr√≥fonos inal√°mbricos",
                    "Streaming a 1 plataforma",
                    "Overlays b√°sicos (templates predefinidos)",
                    "Operador t√©cnico b√°sico"
                ]
            },
            premium: {
                titulo: "ü•á Paquete Premium",
                items: [
                    "3 c√°maras HD",
                    "3 micr√≥fonos profesionales + mezclador",
                    "Streaming a 1 plataforma",
                    "Overlays avanzados (animaciones, lower thirds)",
                    "Director t√©cnico profesional"
                ]
            },
            enterprise: {
                titulo: "üíé Paquete Enterprise",
                items: [
                    "4 c√°maras 4K",
                    "4 micr√≥fonos profesionales + mezclador",
                    "Streaming simult√°neo a hasta 3 plataformas",
                    "Overlays avanzados + branding personalizado",
                    "Director t√©cnico + asistente"
                ]
            }
        };

        // Referencias a elementos del DOM
        const selectPaquete = document.getElementById('paquete_interes');
        const tooltip = document.getElementById('packageTooltip');
        const tooltipTitle = document.getElementById('tooltipTitle');
        const tooltipContent = document.getElementById('tooltipContent');
        const tooltipBackdrop = document.getElementById('tooltipBackdrop');
        const tooltipCloseBtn = document.getElementById('tooltipCloseBtn');

        let tooltipTimeout;
        const isMobile = () => window.innerWidth <= 768;

        // Funci√≥n para detectar espacio disponible y posicionar tooltip
        function posicionarTooltipInteligente() {
            if (isMobile()) {
                // En m√≥vil, siempre usar drawer (sin clases de posici√≥n)
                tooltip.classList.remove('position-top', 'position-bottom');
                return;
            }

            const selectRect = selectPaquete.getBoundingClientRect();
            const tooltipHeight = 280; // Altura aproximada del tooltip
            const margin = 15;

            // Calcular espacio disponible arriba y abajo
            const espacioArribaDisponible = selectRect.top - margin;
            const espacioAbajoDisponible = window.innerHeight - selectRect.bottom - margin;

            // Decidir posici√≥n: preferir arriba, pero si no hay espacio, abajo
            if (espacioArribaDisponible >= tooltipHeight) {
                // Hay espacio arriba - posici√≥n preferida
                tooltip.classList.remove('position-bottom');
                tooltip.classList.add('position-top');
            } else if (espacioAbajoDisponible >= tooltipHeight) {
                // No hay espacio arriba, pero s√≠ abajo
                tooltip.classList.remove('position-top');
                tooltip.classList.add('position-bottom');
            } else {
                // No hay suficiente espacio en ning√∫n lado, usar el que tenga m√°s
                if (espacioArribaDisponible > espacioAbajoDisponible) {
                    tooltip.classList.remove('position-bottom');
                    tooltip.classList.add('position-top');
                } else {
                    tooltip.classList.remove('position-top');
                    tooltip.classList.add('position-bottom');
                }
            }
        }

        // Funci√≥n para actualizar contenido del tooltip
        function actualizarContenidoTooltip(packageType) {
            if (!packageType || !paquetesInfo[packageType]) {
                return false;
            }

            const info = paquetesInfo[packageType];
            
            // Actualizar contenido
            tooltipTitle.textContent = info.titulo;
            tooltipContent.innerHTML = '';
            
            info.items.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                tooltipContent.appendChild(li);
            });

            return true;
        }

        // Funci√≥n para mostrar tooltip
        function mostrarTooltip() {
            const selectedOption = selectPaquete.options[selectPaquete.selectedIndex];
            const packageType = selectedOption.getAttribute('data-package');
            
            if (!actualizarContenidoTooltip(packageType)) {
                return;
            }

            if (isMobile()) {
                // M√≥vil: Mostrar drawer
                tooltipBackdrop.classList.add('show');
                tooltip.style.display = 'block';
                document.body.classList.add('tooltip-open');
                
                // Peque√±o delay para la animaci√≥n
                setTimeout(() => {
                    tooltip.classList.add('show');
                }, 10);
            } else {
                // PC: Mostrar tooltip con posicionamiento inteligente
                posicionarTooltipInteligente();
                tooltip.style.display = 'block';
                
                setTimeout(() => {
                    tooltip.classList.add('show');
                }, 10);
            }
        }

        // Funci√≥n para ocultar tooltip
        function ocultarTooltip() {
            tooltip.classList.remove('show');
            tooltipBackdrop.classList.remove('show');
            document.body.classList.remove('tooltip-open');
            
            setTimeout(() => {
                tooltip.style.display = 'none';
            }, 300); // Esperar a que termine la animaci√≥n
        }

        // Event Listeners

        // Hover sobre el select (PC)
        selectPaquete.addEventListener('mouseenter', function() {
            if (!isMobile()) {
                clearTimeout(tooltipTimeout);
                tooltipTimeout = setTimeout(mostrarTooltip, 200);
            }
        });

        selectPaquete.addEventListener('mouseleave', function() {
            if (!isMobile()) {
                clearTimeout(tooltipTimeout);
                ocultarTooltip();
            }
        });

        // Focus en el select (M√≥vil)
        selectPaquete.addEventListener('focus', function() {
            if (isMobile()) {
                const selectedOption = this.options[this.selectedIndex];
                const packageType = selectedOption.getAttribute('data-package');
                if (packageType) {
                    setTimeout(mostrarTooltip, 300);
                }
            }
        });

        // Actualizar tooltip al cambiar de opci√≥n
        selectPaquete.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            const packageType = selectedOption.getAttribute('data-package');
            
            if (packageType && paquetesInfo[packageType]) {
                actualizarContenidoTooltip(packageType);
                
                // En m√≥vil, mostrar el drawer autom√°ticamente al seleccionar
                if (isMobile()) {
                    mostrarTooltip();
                }
            }
        });

        // Cerrar tooltip con el bot√≥n X (m√≥vil)
        tooltipCloseBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            ocultarTooltip();
        });

        // Cerrar tooltip al hacer click en el backdrop (m√≥vil)
        tooltipBackdrop.addEventListener('click', function() {
            ocultarTooltip();
        });

        // Prevenir que el click dentro del tooltip lo cierre
        tooltip.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // Reposicionar tooltip al hacer resize
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                // Si el tooltip est√° visible y estamos en PC, reposicionar
                if (!isMobile() && tooltip.classList.contains('show')) {
                    posicionarTooltipInteligente();
                }
                // Si cambiamos de PC a m√≥vil o viceversa mientras est√° abierto, cerrar
                const wasMobile = tooltip.style.position === 'fixed';
                const isNowMobile = isMobile();
                if (wasMobile !== isNowMobile && tooltip.classList.contains('show')) {
                    ocultarTooltip();
                }
            }, 100);
        });

        // Cerrar con tecla ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && tooltip.classList.contains('show')) {
                ocultarTooltip();
            }
        });

        // Event listener para cambio de tipo de evento
        document.getElementById('tipo_evento').addEventListener('change', function() {
            renderizarCamposDinamicos(this.value);
        });

        // Validaci√≥n de fecha (debe ser futura)
        document.getElementById('fecha_evento').addEventListener('change', function() {
            const fechaSeleccionada = new Date(this.value);
            const hoy = new Date();
            hoy.setHours(0, 0, 0, 0);

            if (fechaSeleccionada <= hoy) {
                this.parentElement.classList.add('error');
            } else {
                this.parentElement.classList.remove('error');
            }
        });

        // Manejo del env√≠o del formulario
        document.getElementById('eventForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            // Validar formulario
            if (!validarFormulario()) {
                alert('Por favor completa todos los campos obligatorios correctamente');
                return;
            }

            const btn = document.getElementById('submitBtn');
            const originalText = btn.innerHTML;
            
            // 1. Estado de carga
            btn.classList.add('loading', 'disabled');
            btn.innerHTML = ''; // El spinner se muestra v√≠a CSS ::after

            try {
                // 2. Recopilar datos
                const formData = {
                    tipo_evento: document.getElementById('tipo_evento').value,
                    fecha_evento: document.getElementById('fecha_evento').value,
                    ubicacion_evento: document.getElementById('ubicacion_evento').value,
                    duracion_estimada: document.getElementById('duracion_estimada').value,
                    tiene_internet_venue: document.querySelector('input[name="internet"]:checked')?.value || "No especificado",
                    paquete_interes: document.getElementById('paquete_interes').value,
                    nombre_cliente: document.getElementById('nombre_cliente').value,
                    email_cliente: document.getElementById('email_cliente').value,
                    telefono_cliente: document.getElementById('telefono_cliente').value,
                    comentarios_adicionales: document.getElementById('comentarios_adicionales').value,
                    timestamp: new Date().toISOString()
                };

                // Recopilar Add-ons (checkboxes)
                const addOns = [];
                document.querySelectorAll('input[name="add_ons"]:checked').forEach(cb => {
                    addOns.push(cb.value);
                });
                formData.add_ons_solicitados = addOns;

                // Recopilar campos din√°micos espec√≠ficos
                const dynamicInputs = document.querySelectorAll('#dynamicFields input, #dynamicFields select');
                dynamicInputs.forEach(input => {
                    if (input.type === 'checkbox') {
                        if (!formData[input.name]) {
                            formData[input.name] = [];
                        }
                        if (input.checked) {
                            formData[input.name].push(input.value);
                        }
                    } else if (input.type !== 'radio') {
                        formData[input.id] = input.value;
                    }
                });

                console.log("Enviando datos a N8N:", formData);

                // 3. Enviar a N8N Webhook
                const webhookUrl = window.WEBHOOK_URL || '...fallback...';
                
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    // 4. √âxito
                    btn.classList.remove('loading', 'disabled');
                    btn.innerHTML = originalText;
                    mostrarAnimacionExito();
                    
                    // Resetear formulario
                    setTimeout(() => {
                        document.getElementById("eventForm").reset();
                        showStep(0);
                        
                        const tipoEvento = document.getElementById('tipo_evento').value;
                        if(typeof renderizarCamposDinamicos === 'function') {
                            renderizarCamposDinamicos(tipoEvento);
                        }
                        if(typeof updateBackground === 'function') {
                            updateBackground(tipoEvento);
                        }
                    }, 3000);
                } else {
                    throw new Error('Error en la respuesta del servidor');
                }

            } catch (error) {
                console.error('Error:', error);
                btn.classList.remove('loading', 'disabled');
                btn.innerHTML = originalText;
                alert('Hubo un error al enviar la solicitud. Por favor, int√©ntalo de nuevo.');
            }
        });
        
        function validarFormulario() {
            let valido = true;
            const form = document.getElementById('eventForm');
            const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');

            inputs.forEach(input => {
                const formGroup = input.closest('.form-group');
                
                if (!input.value.trim()) {
                    formGroup.classList.add('error');
                    valido = false;
                } else {
                    formGroup.classList.remove('error');
                }
            });

            // Validar email
            const email = document.getElementById('email_cliente');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email.value)) {
                email.closest('.form-group').classList.add('error');
                valido = false;
            }

            // Validar tel√©fono (m√≠nimo 10 d√≠gitos)
            const telefono = document.getElementById('telefono_cliente');
            const telefonoLimpio = telefono.value.replace(/\D/g, '');
            if (telefonoLimpio.length < 10) {
                telefono.closest('.form-group').classList.add('error');
                valido = false;
            }

            return valido;
        }

        function recopilarDatos() {
            const formData = {
                // Campos universales
                tipo_evento: document.getElementById('tipo_evento').value,
                fecha_evento: document.getElementById('fecha_evento').value,
                ubicacion_evento: document.getElementById('ubicacion_evento').value,
                duracion_estimada: document.getElementById('duracion_estimada').value,
                tiene_internet_venue: document.getElementById('tiene_internet_venue').value,
                paquete_interes: document.getElementById('paquete_interes').value,
                nombre_cliente: document.getElementById('nombre_cliente').value,
                email_cliente: document.getElementById('email_cliente').value,
                telefono_cliente: document.getElementById('telefono_cliente').value,
                comentarios_adicionales: document.getElementById('comentarios_adicionales').value,
                
                // Add-ons
                add_ons_solicitados: []
            };

            // Recopilar add-ons seleccionados
            document.querySelectorAll('input[name="add_ons"]:checked').forEach(checkbox => {
                formData.add_ons_solicitados.push(checkbox.value);
            });

            // Recopilar campos din√°micos
            const dynamicFields = document.getElementById('dynamicFields');
            const inputs = dynamicFields.querySelectorAll('input, select');
            
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    if (!formData[input.name]) {
                        formData[input.name] = [];
                    }
                    if (input.checked) {
                        formData[input.name].push(input.value);
                    }
                } else {
                    formData[input.name] = input.value;
                }
            });

            return formData;
        }

        // ========================================
        // ANIMACI√ìN DE √âXITO
        // ========================================

        // ========================================
        // WIZARD / STEPPER LOGIC
        // ========================================

        let currentStep = 0;
        showStep(currentStep);

        function showStep(n) {
            // Mostrar el paso actual
            const steps = document.getElementsByClassName("form-step");
            steps[n].classList.add("active");
            
            // Ocultar otros pasos
            for (let i = 0; i < steps.length; i++) {
                if (i !== n) {
                    steps[i].classList.remove("active");
                }
            }

            // Actualizar botones
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }

            if (n == (steps.length - 1)) {
                document.getElementById("nextBtn").style.display = "none";
                document.getElementById("submitBtn").style.display = "inline";
            } else {
                document.getElementById("nextBtn").style.display = "inline";
                document.getElementById("nextBtn").innerHTML = "Siguiente";
                document.getElementById("submitBtn").style.display = "none";
            }

            // Actualizar indicador de pasos
            updateStepIndicator(n);
        }

        function nextPrev(n) {
            const steps = document.getElementsByClassName("form-step");
            
            // Si vamos adelante, validar el paso actual
            if (n == 1 && !validateStep(currentStep)) return false;

            // Ocultar paso actual
            steps[currentStep].classList.remove("active");
            
            // Incrementar/Decrementar paso
            currentStep = currentStep + n;

            // Si llegamos al final (aunque el submit maneja esto, es bueno tenerlo)
            if (currentStep >= steps.length) {
                return false;
            }

            showStep(currentStep);
        }

        function validateStep(n) {
            const steps = document.getElementsByClassName("form-step");
            const inputs = steps[n].querySelectorAll("input, select, textarea");
            let valid = true;

            for (let i = 0; i < inputs.length; i++) {
                // Si el campo es requerido y est√° vac√≠o
                if (inputs[i].hasAttribute("required") && inputs[i].value.trim() === "") {
                    inputs[i].className += " invalid"; // Agregar clase para estilo si se desea
                    const formGroup = inputs[i].closest('.form-group');
                    formGroup.classList.add('error');
                    valid = false;
                }
                
                // Validaciones espec√≠ficas
                if (inputs[i].id === 'nombre_cliente' && inputs[i].value.trim().length < 3) {
                    valid = false;
                    const formGroup = inputs[i].closest('.form-group');
                    formGroup.classList.add('error');
                }
                
                if (inputs[i].id === 'email_cliente') {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(inputs[i].value.trim())) {
                        valid = false;
                        const formGroup = inputs[i].closest('.form-group');
                        formGroup.classList.add('error');
                    }
                }
                
                if (inputs[i].id === 'telefono_cliente') {
                    const telefonoLimpio = inputs[i].value.replace(/\D/g, '');
                    if (telefonoLimpio.length < 10) {
                        valid = false;
                        const formGroup = inputs[i].closest('.form-group');
                        formGroup.classList.add('error');
                    }
                }
            }

            if (!valid) {
                // Scroll al primer error
                const firstError = steps[n].querySelector('.form-group.error');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }

            return valid;
        }

        function updateStepIndicator(n) {
            const steps = document.getElementsByClassName("step");
            for (let i = 0; i < steps.length; i++) {
                steps[i].className = steps[i].className.replace(" active", "");
                if (i < n) {
                    steps[i].className += " completed";
                } else {
                    steps[i].className = steps[i].className.replace(" completed", "");
                }
            }
            steps[n].className += " active";
        }
        // ========================================
        // FONDOS Y SLOGANS DIN√ÅMICOS
        // ========================================

        const eventosInfo = {
            "Eventos sociales": {
                imagen: "https://images.unsplash.com/photo-1511795409834-ef04bbd61622?auto=format&fit=crop&q=80",
                slogan: "Celebra la vida <br><span>sin l√≠mites</span>",
                subSlogan: "Bodas, cumplea√±os y reuniones familiares. Llevamos la emoci√≥n de tu celebraci√≥n a quienes no pudieron asistir."
            },
            "Conferencias y eventos corporativos": {
                imagen: "https://images.unsplash.com/photo-1544531586-fde5298cdd40?auto=format&fit=crop&q=80",
                slogan: "Conecta con tu <br><span>audiencia global</span>",
                subSlogan: "Streaming profesional para conferencias, lanzamientos y seminarios. Calidad broadcast para tu marca."
            },
            "E-Sport y Gaming": {
                imagen: "https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80",
                slogan: "Sube de nivel <br><span>tu transmisi√≥n</span>",
                subSlogan: "Captura cada jugada con la m√°xima intensidad. Producci√≥n especializada para torneos y eventos gaming."
            },
            "Conciertos y Eventos Art√≠sticos": {
                imagen: "https://images.unsplash.com/photo-1501386761578-eac5c94b800a?auto=format&fit=crop&q=80",
                slogan: "El escenario <br><span>en todas partes</span>",
                subSlogan: "M√∫sica y arte en alta definici√≥n. Haz que tus fans sientan la energ√≠a como si estuvieran en primera fila."
            },
            "Eventos Religiosos": {
                imagen: "https://images.unsplash.com/photo-1438232992991-995b7058bbb3?auto=format&fit=crop&q=80",
                slogan: "Comparte tu <br><span>mensaje de fe</span>",
                subSlogan: "Lleva tus servicios y ceremonias a toda tu comunidad, sin importar d√≥nde se encuentren."
            },
            "Eventos Deportivos": {
                imagen: "https://images.unsplash.com/photo-1461896836934-ffe607ba8211?auto=format&fit=crop&q=80",
                slogan: "Cada gol, <br><span>en tiempo real</span>",
                subSlogan: "Cobertura din√°mica para deportes. Repeticiones, marcadores y la mejor acci√≥n en vivo."
            },
            "default": {
                imagen: "https://images.unsplash.com/photo-1492684223066-81342ee5ff30?auto=format&fit=crop&q=80",
                slogan: "Conserva tus <br><span>mejores momentos</span>",
                subSlogan: "La distancia es solo f√≠sica. Ofrecemos servicios de streaming profesional multic√°mara para que nadie se pierda tu celebraci√≥n."
            }
        };

        // Funci√≥n para actualizar el fondo y textos
        function updateBackground(tipoEvento) {
            const info = eventosInfo[tipoEvento] || eventosInfo["default"];
            const body = document.body;
            const slogan = document.getElementById('dynamicSlogan');
            const subSlogan = document.getElementById('dynamicSubSlogan');

            // Efecto de transici√≥n simple cambiando la URL
            // La transici√≥n CSS en el body se encargar√° del suavizado
            body.style.backgroundImage = `url('${info.imagen}')`;
            
            // Animaci√≥n de texto
            slogan.style.opacity = '0';
            subSlogan.style.opacity = '0';
            
            setTimeout(() => {
                slogan.innerHTML = info.slogan;
                subSlogan.textContent = info.subSlogan;
                slogan.style.opacity = '1';
                subSlogan.style.opacity = '1';
            }, 300);
        }

        // Event listener para cambio de tipo de evento
        document.getElementById('tipo_evento').addEventListener('change', function() {
            renderizarCamposDinamicos(this.value);
            updateBackground(this.value);
        });

        // Inicializar transiciones de texto
        document.getElementById('dynamicSlogan').style.transition = 'opacity 0.3s ease';
        document.getElementById('dynamicSubSlogan').style.transition = 'opacity 0.3s ease';

    </script>
</body>
</html>